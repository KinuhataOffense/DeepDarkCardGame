# 无火的牌局

## 出牌得分系统

- 出牌组合得分
  - **灰烬**：一张孤立的牌 (10筹码)
  - **魂组**：两张相同的牌 (15筹码)
  - **魂链**：三张连续同花色牌 (25筹码)
  - **刻印**：三张相同的牌 (40筹码)
  - **王印**：四张相同的牌 (60筹码)
  - 其他非法组合不能打出。
- 结算机制
  - 打出的牌移出手牌，计算初火碎片 = 筹码 × 倍率
  - 摸回对应数量的牌

## 敌人挑战系统

开始游戏后，玩家逐个遭遇敌人，敌人分为"小怪"和"BOSS"。要击败敌人需要在限制的出牌次数内达到要求的初火碎片。

BOSS还有特殊debuff。例子：

- 每三轮会使用"祈祷"，使你下一轮无法使用魔法牌
- 每轮开始时，随机一张手牌被标记，若未在该轮使用则受到10点伤害
- 每第五轮，所有手牌倍率减半
- 每次打出王印后，手牌区域暂时被封印一轮
- 随机改变牌的数值，增加组合难度

## 商店道具系统

击败一个敌人后，获得一定灵魂，然后进入商店。从商店离开后遭遇下一个敌人。

### 牌堆修改

例子：

- **锻造**：将几张普通牌升级为强化牌
- **星宿**：加入一张特殊卡牌
- **黑矢**：删除几张不需要的牌

### 消耗型道具

例子：

- **火焰卷轴**：临时增加顺子组合50%倍率，持续3轮
- **日光皂石**：预见接下来将摸到的3张牌
- **人性碎片**：一次重新排列所有手牌的机会
- **净化宝珠**：移除一张带有负面效果的牌

### 永久升级

例子：

- **刻印精通**：永久提升刻子组合的筹码值(+5)和倍率(+0.3)
- **灵魂链接**：每完成3次魂链，获得一次额外行动
- **火之传承**：每回合首次组合获得额外25%得分
- **魂之容器**：增加最大生命值上限，提升生存能力

### 被动效果道具

例子：

- **守护之戒**：每回合一次，可以保护一张牌不被敌人效果影响
- **猎龙戒指**：增加10%对龙系敌人的得分
- **咒缚戒指**：可以将一张牌暂时锁定，延迟其效果到下一轮触发
- **混沌戒指**：每轮牌组中随机加入两张混沌牌
- **深渊戒指**：允许进入隐藏深渊区域而不受伤害，但得分降低25%

## 特殊牌效果

### 强化牌效果

例子：

- **锻造石牌**：打出后此牌不移除，可再次使用，但每次使用后降低1点筹码值
- **魂之牌**：可以吸收相邻牌的特性，但每回合结束时会消耗1点生命
- **黑火牌**：使包含它的组合分数翻倍，但结算后永久烧毁，并对玩家造成5点伤害

### 特殊卡牌效果

例子：

- **人性牌**：可作为任意牌参与组合，但使用后会触发随机事件
- **混沌牌**：每回合开始时变为此牌左侧的牌，结算时有20%几率产生额外收益
- **龙契牌**：打出后行动次数+1，但下回合开始时手牌上限-1
- **暗月牌**：可同时参与两个不同组合的结算，但使用后永久离场

## 剧情

玩家作为一名不死人，必须通过牌局挑战来收集足够的初火碎片，最终面对葛温王，决定是延续火之时代还是迎来黑暗时代。

## 待办

- [ ] 完成README.md
- [x] 修复MainMenu的bug
- [ ] 修复GameManager的bug
- [ ] godot引擎调整场景ui
- [ ] ...

2025.3.25 MainMenu前所有bug已修复。已生成占位.png资源文件。MainMenu的bug已修复，牌堆和手牌正常运行。出牌bug未修复。

# 深渊卡牌游戏 (DeepDarkCardGame)

一款融合了卡牌战斗与地下城探索元素的游戏。玩家通过收集卡牌、组合技能，与各种敌人战斗，探索地下城的不同层级。

## 游戏特点

- **卡牌战斗系统**：收集各种卡牌，利用组合效果击败敌人
- **地下城探索**：通过节点地图系统，探索不同路径和遭遇
- **多样敌人**：面对普通敌人、精英怪物和强大的Boss
- **资源管理**：管理生命值、金币等资源，在商店购买新卡牌和道具
- **决策影响**：地图路径的选择将影响游戏难度和获得的奖励

## 游戏模式

游戏提供两种主要模式：

1. **战斗模式**：直接选择敌人进行战斗
2. **地图模式**：通过节点地图探索地下城，面对不同类型的遭遇

## 节点地图系统

地图系统是游戏的核心玩法之一，灵感来源于《杀戮尖塔》。地图具有以下特点：

- **分层结构**：每个地下城由多个层级组成，玩家从底层向上层进行探索
- **节点类型**：
  - **战斗节点**：与普通敌人战斗
  - **精英节点**：与精英敌人战斗，难度更高但奖励更丰富
  - **商店节点**：购买卡牌、道具或恢复生命
  - **休息节点**：恢复生命值
  - **事件节点**：随机事件，可能带来好处或挑战
  - **宝箱节点**：获得随机奖励
  - **Boss节点**：每层的最终挑战
- **路径选择**：玩家可以选择不同的路径，影响游戏难度和获得的奖励
- **进度保存**：地图状态会被保存，允许玩家在不同遭遇间切换

## 操作指南

1. **主菜单**：
   - **开始战斗**：进入战斗模式，选择敌人进行战斗
   - **地图模式**：进入地下城探索模式
   - **退出**：退出游戏

2. **地图界面**：
   - 点击可用节点前进
   - 查看当前状态（生命值、金币等）
   - 返回按钮可返回主菜单

3. **战斗界面**：
   - 使用卡牌进行战斗
   - 结束回合按钮
   - 查看敌人信息和战斗进度

4. **商店界面**：
   - 购买卡牌和道具
   - 升级现有卡牌
   - 返回地图

## 开发说明

本项目使用Godot引擎开发，主要文件结构：

- **scenes/**：游戏场景文件
  - **map/**：地图相关场景
- **scripts/**：游戏脚本
  - **core/**：核心系统脚本
  - **map/**：地图系统脚本
- **assets/**：游戏资源
- **data/**：游戏数据（卡牌、敌人等）
