# 更新日志

## 2025.6.30 - 实现卡牌队列和组合系统

### 新增功能

- **卡牌队列系统**
  - 创建了新的`CardQueueDropzone`类，用于管理打出的卡牌队列
  - 实现了队列满时自动移除最早打出的卡牌的功能
  - 队列最多容纳5张卡牌，按顺序排列显示

- **卡牌选中和打出功能**
  - 添加了选中手牌的功能
  - 添加了打出选中卡牌的按钮和功能
  - 打出的卡牌会进入队列区域

- **组合计算系统**
  - 实现了队列中卡牌的组合检测算法
  - 支持五种组合类型：灰烬、魂组、魂链、刻印、王印
  - 同一张卡牌可以参与多个不同的组合，增加策略性
  - 计算所有组合的总分值

- **战斗场景扩展**
  - 更新了战斗场景，添加了卡牌队列区域
  - 添加了队列分数显示
  - 优化了UI布局

- **卡牌数据系统**
  - 扩展了`CardUIData`类，增加了值、花色、效果ID等属性
  - 添加了特殊卡牌效果的基础框架
  - 创建了示例卡牌数据（普通牌和特殊牌）

### 优化

- **战斗管理器整合**
  - 优化了`BattleManager`类，整合了队列系统
  - 优化了卡牌选中状态的管理
  - 改进了游戏状态和回合管理

- **数据文件更新**
  - 更新了`cards.json`和`collection.json`，支持新的卡牌属性和特性
  - 添加了卡牌组合的计分逻辑

### 后续计划

- 为队列中的卡牌添加视觉高亮效果
- 为不同组合类型添加独特的视觉特效和音效
- 添加组合触发时的动画效果
- 根据游戏测试调整组合分数和特殊卡牌效果
- 改进队列区域的视觉设计
- 添加组合预览功能 